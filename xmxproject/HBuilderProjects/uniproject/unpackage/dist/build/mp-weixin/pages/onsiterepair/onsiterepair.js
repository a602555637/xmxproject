(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/onsiterepair/onsiterepair"],{"247b":function(t,e,n){"use strict";var i=n("e623"),r=n.n(i);r.a},5330:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(n("3e23"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){return Promise.all([n.e("common/vendor"),n.e("wxcomponents/xlocation/xlocation")]).then(n.bind(null,"7d47"))},o=function(){return n.e("components/uni-list-c/uni-list").then(n.bind(null,"43f3"))},s=function(){return n.e("components/uni-list-item-c/uni-list-item").then(n.bind(null,"02d3"))},a=function(){return Promise.all([n.e("common/vendor"),n.e("components/rattenking-dtpicker/rattenking-dtpicker")]).then(n.bind(null,"4d58"))},c=function(){return n.e("wxcomponents/xlist/xlist").then(n.bind(null,"1135"))},u=function(){return n.e("wxcomponents/xlist/xlist-input").then(n.bind(null,"a083"))},l=function(){return n.e("wxcomponents/xlist/xlistPrice").then(n.bind(null,"262e"))},d=function(){return n.e("components/uni-number-box/uni-number-box").then(n.bind(null,"94e7"))},f=function(){return n.e("wxcomponents/getcode/getcode").then(n.bind(null,"933b"))},h=n("d02b"),m={data:function(){var t=new Date,e=t.getTime(),n=h.formatDateTime(e+2e6);return{detail:"",openId:"",date:"",orderNum:"",orderName:"",sprice:[],brand:"",model:"",colorName:"",repairList:[],orderInfo:"orderInfo",timer:n,title:"验证码：",province:"",city:"",district:"",township:"",isChange:!0,currentMinutes:10,currentHour:10,currentDate:12,dateItem:[["日期","01","02","03","04","05","06","07","09",10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],["小时","08","09",10,11,12,13,14,15,16,17,18,19,20],["分钟",10,20,30,40,50]],kiloValue:"1",isConfirm:!1,kiloPrice:"5",isAgreement:!0,totalPrice:0}},components:{uniList:o,uniListItem:s,rattenkingDtpicker:a,xlist:c,xlistInput:u,uniNumberBox:d,getcode:f,xlocation:r,xlistPrice:l},methods:{onOrderDetail:function(){this.isAgreement&&t.navigateTo({url:"../orderdetail/orderdetail"})},onConfirm:function(){this.isConfirm=!this.isConfirm},onNext:function(){this.isConfirm&&t.navigateTo({url:"../bevip/bevip"})},onOrder:function(){this.isConfirm?t.request({url:"https://www.finetwm.com/xmRepair/order/saveUserOrder",method:"POST",header:{"content-type":"application/json"},data:{distance:this.kiloValue,price:this.totalPrice,userId:this.openId,userName:this.orderName,userPhone:this.orderNum,userAddress:this.district,serviceMode:0,serviceTime:this.date,phone:{brand:this.brand,model:this.model,colour:this.colorName},faults:[{faults:this.repairList[0],price:this.sprice[0]},{faults:this.repairList[1],price:this.sprice[1]}]},success:function(e){console.log(e),t.reLaunch({url:"../orderdetail/orderdetail",success:function(t){console.log("success")}})},fail:function(t){console.log(t)}}):t.showToast({title:"请同意协议",icon:"none"})},onNumber:function(t){this.kiloValue=t,this.onPrice(t)},onPrice:function(e){var n=this;this.kiloPrice=5*e,t.getStorage({key:"totalPrice",success:function(t){n.totalPrice=t.data,n.totalPrice=n.totalPrice+n.kiloPrice}})},bindPickerChange:function(t){console.log(t.detail.value);var e=t.detail.value;if(0==e[0])return this.currentDate;var n=this.dateItem[0];if(this.currentDate=n[e[0]],0==e[1])return this.currentHour;var i=this.dateItem[1];if(this.currentHour=i[e[1]],0==e[2])return this.currentMinutes;var r=this.dateItem[2];this.currentMinutes=r[e[2]],this.dateFmt(this.date)},getDate:function(){var t=new Date,e=t.getDate(),n=t.getHours(),i=t.getMinutes();this.currentDate=e,this.currentHour=n,this.currentMinutes=i;var r=t.toLocaleString("chinese",{hour12:!1});this.dateFmt(r)},dateFmt:function(t){if(null!==t&&""!=t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1;i<10&&(i="0"+i);var r=e.getDate();r<10&&(r="0"+r);var o=n+"."+i+"."+r+" "+this.currentHour+":"+this.currentMinutes;this.date=o}else console.log("fail")},onDateItem:function(){var t=this.dateItem[0].splice(0,1)+","+this.dateItem[0].splice(this.currentDate-2,29);this.dateItem[0]=t.split(",")},onCancel:function(){this.getDate()},getStorage:function(){var e=this;t.getStorage({key:"totalPrice",success:function(t){console.log(t.data),e.totalPrice=t.data+5}})},bindDistrict:function(t){this.district=t.district+t.township+t.detailAddress},bindText:function(t){this.detail=t.detail.value}},onLoad:function(){var e=this;t.getStorage({key:"brand",success:function(t){e.brand=t.data}}),t.getStorage({key:"model",success:function(t){e.model=t.data}}),t.getStorage({key:"colorName",success:function(t){e.colorName=t.data}}),t.getStorage({key:"faulesTitle",success:function(t){e.repairList=t.data}}),t.getStorage({key:"sprice",success:function(t){e.sprice=t.data}}),t.getStorage({key:"orderName",success:function(t){e.orderName=t.data}}),t.getStorage({key:"orderNum",success:function(t){e.orderNum=t.data}}),t.getStorage({key:"openId",success:function(t){e.openId=t.data}}),this.onNumber(),this.getDate(),this.onDateItem(),this.getStorage()}};e.default=m}).call(this,n("543d")["default"])},d09c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},d7e0:function(t,e,n){"use strict";n.r(e);var i=n("5330"),r=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=r.a},e623:function(t,e,n){},e8c1:function(t,e,n){"use strict";n.r(e);var i=n("d09c"),r=n("d7e0");for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);n("247b");var s=n("2877"),a=Object(s["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=a.exports}},[["14a2","common/runtime","common/vendor"]]]);